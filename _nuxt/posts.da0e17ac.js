import{_ as u,o as n,c as i,a,t as r,g as x,b as l,i as p,l as f,m,F as g,r as k,h as $}from"./entry.1f35e69d.js";import{f as b}from"./formatDate.19cb4fd8.js";import{q as v}from"./query.29e866b6.js";const P={props:["post"],computed:{date(){return this.post.date.substring(0,this.post.date.length-4)}}},D={class:"post-item"},L={class:"date"},N={class:"time-to-read"};function w(e,s,t,o,c,h){const _=m;return n(),i("div",D,[a("span",L,r(("formatDate"in e?e.formatDate:x(b))(t.post.date,"MMM d")),1),l(_,{to:`/posts/${t.post.link}`,class:"read"},{default:p(()=>[f(r(t.post.title),1)]),_:1},8,["to"]),a("span",N,[a("i",null,r(t.post.timeToRead)+" min read",1)])])}const B=u(P,[["render",w]]);const F={props:["year","tag","posts"]},M={class:"post-list"};function C(e,s,t,o,c,h){const _=m,y=B;return n(),i("div",M,[a("h1",null,[l(_,{to:`/posts/year/${t.year}`},{default:p(()=>[f(r(t.year),1)]),_:1},8,["to"])]),(n(!0),i(g,null,k(t.posts,d=>(n(),$(y,{key:d.link,post:d},null,8,["post"]))),128))])}const E=u(F,[["render",C],["__scopeId","data-v-9f9e95db"]]);function I(e){return!e.unlisted||!1}function Y(e){if(!e)return console.error("failed to fetch posts"),[];const s={};return e.forEach(t=>{const o=new Date(t.date).getUTCFullYear();I(t)&&(s[o]===void 0&&(s[o]=[]),s[o].push(t))}),Object.keys(s).sort((t,o)=>o-t).map(t=>[t,s[t].sort((o,c)=>c.date>o.date?1:-1)])}function j(e={}){const s={unlisted:{$ne:!0}};return v("/posts").where({...e,...s}).without("body").find()}export{E as _,j as d,Y as p};
